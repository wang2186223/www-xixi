<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 0347 - Claimed by the Alpha | Free Novel Online - NovelVibe</title>
    <meta name="description" content="Read Claimed by the Alpha Chapter 338 on NovelVibe - Free werewolf romance novels">
    <meta name="keywords" content="free novel online, werewolf, alpha, pack, novel updates, light novel, apothecary diaries light novel, heavens official blessing novel, dune novel, read novel free, online novel, romance novel, graphic novel, visual novel, novel master, novel synonym, school spirits graphic novel, how many words in a novel, free novels online">
    <meta name="robots" content="index, follow">
    
    <!-- Time Meta Tags for SEO -->
    
    <meta property="article:published_time" content="2026-01-07T17:34:03.925575">
    <meta property="article:modified_time" content="2026-01-07T17:34:03.925575">
    <meta name="date" content="2026-01-07">
    <meta name="last-modified" content="2026-01-07 17:34:03">
    
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Chapter 0347">
    <meta property="og:description" content="Read Claimed by the Alpha online for free">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.xixifreenovel.com/novels/claimed-by-the-alpha/chapter-338">
    <meta property="og:image" content="/covers/claimed-by-the-alpha-ScreenShot_2025-11-24_141044_888.png">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Chapter 0347">
    <meta name="twitter:description" content="Read Claimed by the Alpha online">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.xixifreenovel.com/novels/claimed-by-the-alpha/chapter-338">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EWY8W7MKKM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EWY8W7MKKM');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3785399647875281"
         crossorigin="anonymous"></script>
    
    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');

    fbq('init', '3902941096613787');
    
    // Natural 72-hour event tracking prevention (resets every 3 days)
    function shouldTrackEvent(eventName) {
        const now = new Date();
        const threeDaysAgo = new Date(now.getTime() - (3 * 24 * 60 * 60 * 1000));
        const currentPeriod = Math.floor(now.getTime() / (3 * 24 * 60 * 60 * 1000));
        const storageKey = `fb_event_${eventName}`;
        const lastTrackedPeriod = localStorage.getItem(storageKey);
        
        if (!lastTrackedPeriod || parseInt(lastTrackedPeriod) !== currentPeriod) {
            localStorage.setItem(storageKey, currentPeriod.toString());
            return true;
        }
        
        return false;
    }
    
    // Track PageView with 72-hour prevention
    if (shouldTrackEvent('PageView')) {
        fbq('track', 'PageView');
        console.log('Facebookäº‹ä»¶å·²å‘é€: PageView (é¡µé¢æµè§ˆ)');
    } else {
        console.log('Facebookäº‹ä»¶å·²è·³è¿‡: PageView (æœ¬72å°æ—¶å†…å·²å‘é€)');
    }
    
    // Reading time tracking for Facebook Pixel
    let readingStartTime = Date.now();
    let oneMinuteSent = false;
    let tenMinutesSent = false;
    
    function checkReadingTime() {
        const currentTime = Date.now();
        const readingTime = (currentTime - readingStartTime) / 1000 / 60; // in minutes
        
        if (!oneMinuteSent && readingTime >= 1) {
            if (shouldTrackEvent('1m_web')) {
                fbq('track', '1m_web');
                console.log('Facebookäº‹ä»¶å·²å‘é€: 1m_web (ç”¨æˆ·é˜…è¯»1åˆ†é’Ÿ)');
            } else {
                console.log('Facebookäº‹ä»¶å·²è·³è¿‡: 1m_web (æœ¬72å°æ—¶å†…å·²å‘é€)');
            }
            oneMinuteSent = true;
        }
        
        if (!tenMinutesSent && readingTime >= 10) {
            if (shouldTrackEvent('10m_web')) {
                fbq('track', '10m_web');
                console.log('Facebookäº‹ä»¶å·²å‘é€: 10m_web (ç”¨æˆ·é˜…è¯»10åˆ†é’Ÿ)');
            } else {
                console.log('Facebookäº‹ä»¶å·²è·³è¿‡: 10m_web (æœ¬72å°æ—¶å†…å·²å‘é€)');
            }
            tenMinutesSent = true;
        }
    }
    
    // Check reading time every 30 seconds
    setInterval(checkReadingTime, 30000);
    
    // Also check when page becomes visible again (in case user switches tabs)
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            checkReadingTime();
        }
    });
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=3902941096613787&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Facebook Pixel Code -->
    
    <!-- Page Visit Statistics Code -->
    <script>
    // Page visit data collection
    function sendPageVisit() {
        // First get user IP address
        getUserIP().then(userIP => {
            const data = {
                page: window.location.href,
                userAgent: navigator.userAgent,
                userIP: userIP
            };
            
            // Send data to Google Apps Script
            fetch('https://script.google.com/macros/s/AKfycbxvbINCdEawKjvPQxGFWACwJ1NL_PGraB2FntCuJbV7k3QGfNvm_rMG6JB0CjsV1A/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.log('Analytics error:', error);
            });
        }).catch(error => {
            // If IP retrieval fails, still send other data
            const data = {
                page: window.location.href,
                userAgent: navigator.userAgent,
                userIP: 'Unknown'
            };
            
            fetch('https://script.google.com/macros/s/AKfycbxvbINCdEawKjvPQxGFWACwJ1NL_PGraB2FntCuJbV7k3QGfNvm_rMG6JB0CjsV1A/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.log('Analytics error:', error);
            });
        });
    }
    
    // Get user IP address
    async function getUserIP() {
        try {
            // Method 1: Use free IP API
            const response = await fetch('https://api.ipify.org?format=json');
            const ipData = await response.json();
            return ipData.ip;
        } catch (error1) {
            try {
                // Method 2: Backup IP API
                const response = await fetch('https://httpbin.org/ip');
                const ipData = await response.json();
                return ipData.origin.split(',')[0].trim();
            } catch (error2) {
                try {
                    // Method 3: Third backup API
                    const response = await fetch('https://jsonip.com');
                    const ipData = await response.json();
                    return ipData.ip;
                } catch (error3) {
                    console.log('IP retrieval failed, using Unknown');
                    return 'Unknown';
                }
            }
        }
    }
    
    // Send visit data after page load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', sendPageVisit);
    } else {
        sendPageVisit();
    }
    </script>
    
    <!-- ===== å¹¿å‘Šç‚¹å‡»ç›‘æ§ï¼ˆè¿”å›æ£€æµ‹ç‰ˆï¼‰===== -->
    <script>
    (function() {
        'use strict';
        
        const CONFIG = {
            scriptUrl: 'https://script.google.com/macros/s/AKfycbxvbINCdEawKjvPQxGFWACwJ1NL_PGraB2FntCuJbV7k3QGfNvm_rMG6JB0CjsV1A/exec',
            returnWindow: 50000,  // 50ç§’è¿”å›çª—å£
            storageKey: 'ad_total_clicks',
            debugMode: true
        };
        
        let pageLoadTime = Date.now();
        let leaveTime = null;
        let hasAds = false;
        
        // æ£€æŸ¥å¹¿å‘Šæ˜¯å¦å­˜åœ¨
        function checkAds() {
            const checkInterval = setInterval(() => {
                // æ£€æŸ¥Google AdSenseå¹¿å‘Š
                const adsenseAds = document.querySelectorAll('.adsbygoogle');
                if (adsenseAds.length > 0) {
                    hasAds = true;
                    if (CONFIG.debugMode) console.log('[AdClick] âœ… æ‰¾åˆ°AdSenseå¹¿å‘Š');
                    clearInterval(checkInterval);
                }
            }, 30000);
            setTimeout(() => clearInterval(checkInterval), 10000);
        }
        
        // é¡µé¢éšè—æ—¶è®°å½•ç¦»å¼€æ—¶é—´
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                leaveTime = Date.now();
                if (CONFIG.debugMode) console.log('[AdClick] ğŸ‘‹ ç”¨æˆ·ç¦»å¼€é¡µé¢');
            } else {
                // é¡µé¢å¯è§æ—¶æ£€æŸ¥æ˜¯å¦åº”è¯¥ä¸ŠæŠ¥
                if (leaveTime && hasAds) {
                    const awayDuration = Date.now() - leaveTime;
                    if (awayDuration <= CONFIG.returnWindow) {
                        if (CONFIG.debugMode) console.log(`[AdClick] âœ… ç”¨æˆ·è¿”å›ï¼ˆç¦»å¼€${Math.round(awayDuration/1000)}ç§’ï¼‰ï¼Œè®°å½•ç‚¹å‡»`);
                        reportClick();
                    } else {
                        if (CONFIG.debugMode) console.log(`[AdClick] â­ï¸ ç¦»å¼€è¶…è¿‡50ç§’ï¼ˆ${Math.round(awayDuration/1000)}ç§’ï¼‰ï¼Œå¿½ç•¥`);
                    }
                    leaveTime = null;
                }
            }
        });
        
        // ä¸ŠæŠ¥å¹¿å‘Šç‚¹å‡»
        function reportClick() {
            const totalClicks = incrementClicks();
            const stayDuration = Math.round((Date.now() - pageLoadTime) / 1000);
            
            // è·å–ç¬¬ä¸€ä¸ªå¹¿å‘Šä¿¡æ¯
            const firstAd = document.querySelector('.adsbygoogle');
            const adSlot = firstAd ? (firstAd.getAttribute('data-ad-slot') || 'unknown') : 'unknown';
            const adPosition = firstAd ? Math.round(firstAd.getBoundingClientRect().top + window.scrollY) : 0;
            
            const data = {
                timestamp: new Date().toISOString(),
                eventType: 'ad_click',
                novel: 'Claimed by the Alpha',
                chapter: '338',
                pageUrl: window.location.href,
                adSlot: adSlot,
                adPosition: adPosition,
                scrollDepth: Math.round(window.scrollY),
                userIP: '',
                userAgent: navigator.userAgent,
                screenSize: `${window.screen.width}x${window.screen.height}`,
                stayDuration: stayDuration,
                totalClickCount: totalClicks,
                clickSource: 'return_50s'
            };
            
            sendData(data);
        }
        
        // å‘é€æ•°æ®
        async function sendData(data) {
            try {
                if (typeof getUserIP === 'function') {
                    data.userIP = await getUserIP();
                } else {
                    try {
                        const res = await fetch('https://api.ipify.org?format=json');
                        const json = await res.json();
                        data.userIP = json.ip;
                    } catch (e) {
                        data.userIP = 'Unknown';
                    }
                }
                
                const payload = JSON.stringify(data);
                
                fetch(CONFIG.scriptUrl, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {'Content-Type': 'application/json'},
                    body: payload
                });
                
                if (CONFIG.debugMode) console.log('[AdClick] ğŸ“¡ å·²ä¸ŠæŠ¥');
                
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'ad_click', {
                        ad_slot: data.adSlot,
                        total_clicks: data.totalClickCount
                    });
                }
            } catch (error) {
                if (CONFIG.debugMode) console.log('[AdClick] âŒ å‘é€å¤±è´¥:', error);
            }
        }
        
        // ç´¯è®¡ç‚¹å‡»æ¬¡æ•°
        function incrementClicks() {
            try {
                let total = parseInt(localStorage.getItem(CONFIG.storageKey) || '0');
                total++;
                localStorage.setItem(CONFIG.storageKey, total.toString());
                return total;
            } catch (e) {
                return 0;
            }
        }
        
        // åˆå§‹åŒ–
        checkAds();
        if (CONFIG.debugMode) console.log('[AdClick] ğŸš€ ç›‘æ§å¯åŠ¨ï¼šç¦»å¼€50ç§’å†…è¿”å› = å¹¿å‘Šç‚¹å‡»');
        
    })();
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #007AFF;
            --bg-color: #FFFFFF;
            --text-color: #333333;
            --secondary-bg: #F2F2F7;
            --border-color: #E5E5EA;
            --header-height: 60px;
            --footer-height: 70px;
            --content-padding: 20px;
        }

        .dark-mode {
            --primary-color: #0A84FF;
            --bg-color: #1C1C1E;
            --text-color: #E5E5EA;
            --secondary-bg: #2C2C2E;
            --border-color: #38383A;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            padding: 0 var(--content-padding);
        }

        header {
            height: var(--header-height);
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .left-header, .right-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-weight: 700;
            font-size: 22px;
            color: var(--primary-color);
            text-decoration: none;
        }

        .btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
        }

        .btn:hover {
            background-color: var(--secondary-bg);
        }

        .theme-toggle {
            width: 40px;
            height: 24px;
            background-color: var(--secondary-bg);
            border-radius: 12px;
            position: relative;
            cursor: pointer;
        }

        .theme-toggle::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--primary-color);
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.3s;
        }

        .dark-mode .theme-toggle::after {
            transform: translateX(16px);
        }

        main {
            flex: 1;
            padding: 30px 0;
        }

        .chapter-title {
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .content {
            font-size: 18px;
            text-align: justify;
        }

        .content p {
            margin-bottom: 20px;
        }

        .font-controls {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            justify-content: center;
        }

        .font-btn {
            padding: 8px 16px;
            background-color: var(--secondary-bg);
            border: none;
            border-radius: 8px;
            color: var(--text-color);
            cursor: pointer;
        }

        .font-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        footer {
            height: var(--footer-height);
            background-color: var(--bg-color);
            border-top: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .nav-btn {
            padding: 12px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            text-decoration: none;
        }

        .nav-btn:disabled {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            opacity: 0.7;
            cursor: not-allowed;
        }

        .chapter-nav {
            display: flex;
            gap: 15px;
        }

        .font-small {
            font-size: 16px;
        }

        .font-medium {
            font-size: 18px;
        }

        .font-large {
            font-size: 20px;
        }

        @media (max-width: 768px) {
            :root {
                --content-padding: 15px;
            }
            
            .chapter-title {
                font-size: 22px;
            }
            
            .content {
                font-size: 16px;
            }
            
            .nav-btn {
                padding: 10px 15px;
                font-size: 14px;
            }
        }
    </style>
    
    <!-- Schema.org Structured Data for Article -->
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Chapter 0347 - Claimed by the Alpha",
        "alternativeHeadline": "Chapter 338: Chapter 0347",
        "author": {
            "@type": "Person",
            "name": "Unknown Author"
        },
        "datePublished": "2026-01-07T17:34:03.925575",
        "dateModified": "2026-01-07T17:34:03.925575",
        "publisher": {
            "@type": "Organization",
            "name": "NovelVibe",
            "url": "https://www.xixifreenovel.com",
            "logo": {
                "@type": "ImageObject",
                "url": "https://www.xixifreenovel.com/assets/images/logo.png"
            }
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://www.xixifreenovel.com/novels/claimed-by-the-alpha/chapter-338"
        },
        "url": "https://www.xixifreenovel.com/novels/claimed-by-the-alpha/chapter-338",
        
        "image": {
            "@type": "ImageObject",
            "url": "/covers/claimed-by-the-alpha-ScreenShot_2025-11-24_141044_888.png"
        },
        
        "articleSection": "Chapter",
        "wordCount": "749",
        "isPartOf": {
            "@type": "Book",
            "name": "Claimed by the Alpha",
            "author": {
                "@type": "Person",
                "name": "Unknown Author"
            }
        }
    }
    </script>
    
    
    <!-- Breadcrumb Navigation Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://www.xixifreenovel.com/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Claimed by the Alpha",
                "item": "https://www.xixifreenovel.com/novels/claimed-by-the-alpha/"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Chapter 338",
                "item": "https://www.xixifreenovel.com/novels/claimed-by-the-alpha/chapter-338"
            }
        ]
    }
    </script>
    
    <!-- FAQ Schema for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "Can I read free novels online?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! You can read Claimed by the Alpha and thousands of other free novels online at NovelVibe. We offer light novels, graphic novels, visual novels, romance novels, and more without registration or payment."
                }
            },
            {
                "@type": "Question",
                "name": "How do I get novel updates?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Visit NovelVibe regularly for daily novel updates. We add new chapters to Claimed by the Alpha and other novels frequently. Bookmark this page to stay updated with the latest novel master content."
                }
            },
            {
                "@type": "Question",
                "name": "What is a light novel?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "A light novel is a style of novel primarily targeting young adults. Popular examples include Apothecary Diaries light novel and Heaven's Official Blessing novel. Our free novel online platform includes various light novels, romance novels, and other popular fiction genres like Dune novel."
                }
            },
            {
                "@type": "Question",
                "name": "What is a graphic novel?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "A graphic novel is a book-length comic narrative. Examples include School Spirits graphic novel and Forever graphic novel. While we focus on text-based novels, we cover various novel formats and genres."
                }
            },
            {
                "@type": "Question",
                "name": "How many words in a novel?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "A typical novel contains 50,000-100,000 words. Light novels are often shorter (40,000-50,000 words), while epic novels can exceed 120,000 words. Claimed by the Alpha offers engaging storytelling regardless of length."
                }
            },
            {
                "@type": "Question",
                "name": "What is a novel synonym?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Novel synonyms include: book, story, fiction, narrative, tale, romance, literature. On NovelVibe, you can explore all types of novels including light novels, graphic novels, visual novels, and classic romance novels."
                }
            }
        ]
    }
    </script>
    
    <!-- Ahrefs Analytics -->
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="E2ZZe80dfDLAEGhT2iI37A" async></script>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="left-header">
                    <a href="/novels/claimed-by-the-alpha/" class="btn" id="back-btn">
                        <i class="fas fa-chevron-left"></i>
                    </a>
                    <a href="/" class="logo">NovelVibe</a>
                </div>
                <div class="right-header">
                    <button class="btn" id="theme-btn">
                        <div class="theme-toggle"></div>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <h1 class="chapter-title">Chapter 0347</h1>
            <div class="content font-medium">
                
                
                <p>â€œI already told you, youâ€™re focusing on the wrong person!â€</p>
                
                <!-- AdSense In-Article Ad after first paragraph -->
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3785399647875281"
                     crossorigin="anonymous"></script>
                <ins class="adsbygoogle"
                     style="display:block; text-align:center;"
                     data-ad-layout="in-article"
                     data-ad-format="fluid"
                     data-ad-client="ca-pub-3785399647875281"
                     data-ad-slot="6281302150"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                
                
                
                
                <p>â€œSo if something happens to her, what then? Her father comes after us? You come after us?â€</p>
                
                
                
                
                <p>â€œExactly. Iâ€™ll say this once. If you or any other Lycan tries anything foolish, it won&#39;t just be me or Luc you have to answer to. Lottie is part of Athenaâ€™s family. How do you think Athena will react after she welcomed you into her home?â€</p>
                
                
                
                
                <p>â€œI support our Alpha completely, but I donâ€™t want that Hunterâ€™s child around my kids.â€</p>
                
                
                
                
                <p>â€œWhy? Worried theyâ€™ll turn out like Seraphina?â€ I walk off before he can respond.</p>
                
                
                
                
                <p>Athena stands at the front door, hands on her hips. â€œNow youâ€™re threatening other Lycans?â€</p>
                
                
                
                
                <p>â€œIt wasnâ€™t a threat. But Iâ€™m glad they can mind-link you when necessary.â€</p>
                
                
                
                
                <p>She sighs and sits on the bottom step. â€œZachary. Iâ€™m sorry, alright? I had to intervene. I couldnâ€™t let you do it.â€</p>
                
                
                
                
                <p>â€œStop apologizing, Athena. I keep telling you I understand. You donâ€™t need to keep saying sorry.â€</p>
                
                
                
                
                <p>â€œButâ€”â€</p>
                
                
                
                
                <p>â€œI donâ€™t blame you, Athena. Not for anything. I blame her. She took the easy way out. She didnâ€™t even fight for what was hers. And honestly, I have bigger things to worry about.â€</p>
                
                
                
                
                <p>â€œIf you need to talk, Iâ€™mâ€”â€</p>
                
                
                
                
                <p>â€œI donâ€™t.â€</p>
                
                
                
                
                <p>She exhales sharply. â€œAre you going to tell me what happened with Caleb?â€</p>
                
                
                
                
                <p>â€œIâ€™m sure heâ€™s already told you.â€</p>
                
                
                
                
                <p>She rolls her eyes. â€œI like to hear both sides.â€</p>
                
                
                
                
                <p>I sit beside her on the stairs. â€œI wonâ€™t let anything happen to Lottie.â€</p>
                
                
                
                
                <p>â€œI know. But we all have to make this work. We have the original Wolves, Lycansâ€”both bitten and pure-bloodsâ€”and several Hunters. Though Iâ€™m not sure Iâ€™d put Theodore in that category.â€ She smiles faintly. â€œIâ€™ll talk to Caleb.â€</p>
                
                
                
                
                <p>â€œHeâ€™s a jerk, Athena. Donâ€™t fall for his nonsense.â€</p>
                
                
                
                
                <p>â€œItâ€™s my choice.â€</p>
                
                
                
                
                <p>I nod. â€œWhereâ€™s Alexander?â€</p>
                
                
                
                
                <p>â€œDown at the gate. Apparently, thereâ€™s another one.â€</p>
                
                
                
                
                <p>â€œAnd you didnâ€™t go?â€</p>
                
                
                
                
                <p>â€œI waited for you. Isabella took the twins. I was about to head down, but whoeverâ€™s at the gate isnâ€™t urgent. You understand that, right? Youâ€™re not alone here. Just because sheâ€™s gone doesnâ€™t mean youâ€™re not family.â€</p>
                
                
                
                
                <p>â€œGood. Because youâ€™re stuck with me.â€</p>
                
                
                
                
                <p>We walk down to the gates together. A woman stands on the other side, arms crossed defensively. Sheâ€™s human. How did a human get all the way out here?</p>
                
                
                
                
                <p>Her eyes are an unusual shade of grey. â€œYou donâ€™t believe me, do you?â€ she mutters to Alexander.</p>
                
                
                
                
                <p>â€œWhy would a human be here?â€ Athena whispers.</p>
                
                
                
                
                <p>â€œOnly one way to find out.â€</p>
                
                
                
                
                <p>The womanâ€™s strange grey eyes shift to Athena as we approach. Her lips part slightly. â€œShit!â€</p>
                
                
                
                
                <p>I immediately pull Athena behind me. Her life is far more valuable than mine. I donâ€™t need another fool trying to harm her.</p>
                
                
                
                
                <p>â€œHow did you find this place?â€ Alexander demands.</p>
                
                
                
                
                <p>â€œI was shown.â€</p>
                
                
                
                
                <p>â€œBy who?â€</p>
                
                
                
                
                <p>â€œSomeone like me.â€</p>
                
                
                
                
                <p>â€œAnother human?â€ I ask.</p>
                
                
                
                
                <p>â€œIâ€™m not human. Not anymore, at least. Itâ€™s complicated. I was a Lycan. Then my abilities were taken.â€</p>
                
                
                
                
                <p>â€œYou werenâ€™t bound. If you were bound, youâ€™d still carry a scent. But you only smell human,â€ Alexander tells her.</p>
                
                
                
                
                <p>â€œI donâ€™t know what he did to us. I just know I was never the same after.â€</p>
                
                
                
                
                <p>â€œBullshit!â€ Alexander snaps.</p>
                
                
                
                
                <p>â€œWhat if I told you the same thing happened to Seraphina?â€ the woman says.</p>
                
                
                
                
                <p>â€œWhat are you talking about?â€ Athena steps around me.</p>
                
                
                
                
                <p>â€œSeraphina isnâ€™t a Lycan anymore.â€</p>
                
                
                
                
                <p>â€œImpossible.â€</p>
                
                
                
                
                <p>â€œSheâ€™s the one who showed me where your pack is. I came to warn you.â€</p>
                
                
                
                
                <p>â€œReally? What is Seraphina threatening me with now?â€ Athena demands.</p>
                
                
                
                
                <p>â€œItâ€™s not Seraphina. She didnâ€™t want me to come, but we had no choice. The man who did this to me and others is probably on his way here looking for her. She told him she was your half-sister.â€ The woman shakes her head at Athena.</p>
                
                
                
                
                <p>â€œIâ€™m not afraid of one man!â€ Athena retorts. â€œWhatever happened to Seraphina is exactly what she deserved.â€</p>
                
                
                
                
                <p>The woman sighs. â€œShe did a lot of terrible things, I know. But instead of facing consequences, she had everything stripped from her. Thatâ€™s what he does.â€</p>
                
                
                
                
                <p>Athena scoffs.</p>
                
                
                
                
                <p>â€œWhatâ€™s your name?â€ Alexander asks.</p>
                
                
                
                
                <p>â€œEvelyn Reed. But everyone calls me Evie or Eve.â€ She shakes her head. â€œThis man is dangerous.â€</p>
                
                
                
                
                <p>â€œIs this a trick?â€ Athena whispers to me.</p>
                
                
                
                
                <p>â€œShe seems to know a lot.â€</p>
                
                
                
                
                <p>â€œShe isnâ€™t lying.â€ Luc strolls up beside us. His hazel eyes fix on the woman. â€œBut youâ€™re not telling us everything either, are you, Evelyn?â€</p>
                
                
                
            </div>
            
            <div class="font-controls">
                <button class="font-btn" id="small-font">A</button>
                <button class="font-btn active" id="medium-font">A</button>
                <button class="font-btn" id="large-font">A</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                
                <a href="/novels/claimed-by-the-alpha/chapter-337" class="nav-btn" id="prev-chapter">
                    <i class="fas fa-arrow-left"></i> Previous
                </a>
                
                
                
                <a href="/novels/claimed-by-the-alpha/chapter-339" class="nav-btn" id="next-chapter">
                    Next <i class="fas fa-arrow-right"></i>
                </a>
                
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const themeBtn = document.getElementById('theme-btn');
        const smallFontBtn = document.getElementById('small-font');
        const mediumFontBtn = document.getElementById('medium-font');
        const largeFontBtn = document.getElementById('large-font');
        const content = document.querySelector('.content');

        // Theme Toggle
        if (themeBtn) {
            themeBtn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                // Save theme preference
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
        }

        // Font Size Controls
        if (smallFontBtn) {
            smallFontBtn.addEventListener('click', () => {
                content.classList.remove('font-medium', 'font-large');
                content.classList.add('font-small');
                updateFontButtons(smallFontBtn);
                localStorage.setItem('fontSize', 'small');
            });
        }

        if (mediumFontBtn) {
            mediumFontBtn.addEventListener('click', () => {
                content.classList.remove('font-small', 'font-large');
                content.classList.add('font-medium');
                updateFontButtons(mediumFontBtn);
                localStorage.setItem('fontSize', 'medium');
            });
        }

        if (largeFontBtn) {
            largeFontBtn.addEventListener('click', () => {
                content.classList.remove('font-small', 'font-medium');
                content.classList.add('font-large');
                updateFontButtons(largeFontBtn);
                localStorage.setItem('fontSize', 'large');
            });
        }

        function updateFontButtons(activeBtn) {
            [smallFontBtn, mediumFontBtn, largeFontBtn].forEach(btn => {
                if (btn) btn.classList.remove('active');
            });
            activeBtn.classList.add('active');
        }

        // Load saved font size
        const savedFontSize = localStorage.getItem('fontSize');
        if (savedFontSize) {
            content.classList.remove('font-small', 'font-medium', 'font-large');
            content.classList.add('font-' + savedFontSize);
            
            const fontButtons = {
                'small': smallFontBtn,
                'medium': mediumFontBtn,
                'large': largeFontBtn
            };
            
            if (fontButtons[savedFontSize]) {
                updateFontButtons(fontButtons[savedFontSize]);
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                const prevBtn = document.getElementById('prev-chapter');
                if (prevBtn && !prevBtn.disabled) {
                    window.location.href = prevBtn.href;
                }
            } else if (e.key === 'ArrowRight') {
                const nextBtn = document.getElementById('next-chapter');
                if (nextBtn && !nextBtn.disabled) {
                    window.location.href = nextBtn.href;
                }
            }
        });

        // ===== Cross-Site Referrer Tracking System =====
        // Detect ref parameter from URL and track reading progress
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const referrerDomain = urlParams.get('ref');
            
            if (referrerDomain) {
                // First time coming from external site, save referrer
                localStorage.setItem('crossSiteRef', referrerDomain);
                localStorage.setItem('crossSiteRefTime', Date.now().toString());
                
                // Initialize chapter count to 0 if not exists
                if (!localStorage.getItem('crossSiteChapterCount')) {
                    localStorage.setItem('crossSiteChapterCount', '0');
                }
                
                console.log(`ğŸ“Œ Cross-Site: Received from ${referrerDomain}`);
            }
            
            // If we have a cross-site referrer, increment chapter count
            const crossSiteRef = localStorage.getItem('crossSiteRef');
            if (crossSiteRef) {
                let chapterCount = parseInt(localStorage.getItem('crossSiteChapterCount') || '0');
                chapterCount++;
                localStorage.setItem('crossSiteChapterCount', chapterCount.toString());
                console.log(`ğŸ“– Cross-Site: Reading chapter ${chapterCount}/4 from ${crossSiteRef}`);
            }
        })();

        // ===== Cross-Site Return Redirect (100% after 4 chapters) =====
        // Intercept Next button and return to original site after reading 4 chapters
        (function() {
            const nextBtn = document.getElementById('next-chapter');
            if (nextBtn && nextBtn.href) {
                nextBtn.addEventListener('click', function(e) {
                    const crossSiteRef = localStorage.getItem('crossSiteRef');
                    const chapterCount = parseInt(localStorage.getItem('crossSiteChapterCount') || '0');
                    
                    // Check if user has read 4 chapters from external site
                    if (crossSiteRef && chapterCount >= 4) {
                        e.preventDefault();
                        
                        // Parse current next URL
                        const url = new URL(this.href, window.location.origin);
                        
                        // Remove 'ref' parameter from query string
                        const searchParams = new URLSearchParams(url.search);
                        searchParams.delete('ref');
                        const cleanSearch = searchParams.toString() ? '?' + searchParams.toString() : '';
                        
                        // Construct return URL with original domain (same path structure, without ref parameter)
                        const returnUrl = `https://${crossSiteRef}${url.pathname}${cleanSearch}${url.hash}`;
                        
                        // Clear cross-site tracking data
                        localStorage.removeItem('crossSiteRef');
                        localStorage.removeItem('crossSiteChapterCount');
                        localStorage.removeItem('crossSiteRefTime');
                        
                        console.log(`ğŸ”™ Cross-Site: Returning to ${returnUrl}`);
                        
                        // Redirect back to original site
                        window.location.href = returnUrl;
                    }
                    // Otherwise, let default navigation work (not yet 4 chapters or no cross-site ref)
                });
            }
        })();

        // URLå‚æ•°ä¼ é€’ç³»ç»Ÿ - ä¿ç•™æµé‡æ¥æºè¿½è¸ªå‚æ•°
        (function() {
            // æå–å½“å‰URLä¸­çš„è¿½è¸ªå‚æ•°
            function getTrackingParams() {
                const urlParams = new URLSearchParams(window.location.search);
                const trackingParams = {};
                
                // éœ€è¦ä¿ç•™çš„å‚æ•°åˆ—è¡¨
                const paramsToKeep = [
                    'fbclid',           // Facebook Click ID
                    'utm_source',       // UTMæ¥æº
                    'utm_medium',       // UTMåª’ä»‹
                    'utm_campaign',     // UTMæ´»åŠ¨
                    'utm_term',         // UTMå…³é”®è¯
                    'utm_content',      // UTMå†…å®¹
                    'utm_id',           // UTM ID
                    'gclid',            // Google Click ID
                    'msclkid',          // Microsoft Click ID
                    'ref',              // å¼•èæ¥æº
                    'source'            // é€šç”¨æ¥æºå‚æ•°
                ];
                
                paramsToKeep.forEach(param => {
                    if (urlParams.has(param)) {
                        trackingParams[param] = urlParams.get(param);
                    }
                });
                
                return trackingParams;
            }
            
            // å°†å‚æ•°å¯¹è±¡è½¬æ¢ä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²
            function paramsToQueryString(params) {
                const entries = Object.entries(params);
                if (entries.length === 0) return '';
                return '?' + entries.map(([key, value]) => 
                    `${encodeURIComponent(key)}=${encodeURIComponent(value)}`
                ).join('&');
            }
            
            // ä¸ºURLæ·»åŠ è¿½è¸ªå‚æ•°
            function addTrackingParamsToUrl(url, trackingParams) {
                if (Object.keys(trackingParams).length === 0) return url;
                
                // è§£æURL
                const urlObj = new URL(url, window.location.origin);
                
                // æ·»åŠ è¿½è¸ªå‚æ•°ï¼ˆä¸è¦†ç›–å·²å­˜åœ¨çš„å‚æ•°ï¼‰
                Object.entries(trackingParams).forEach(([key, value]) => {
                    if (!urlObj.searchParams.has(key)) {
                        urlObj.searchParams.set(key, value);
                    }
                });
                
                // è¿”å›ç›¸å¯¹è·¯å¾„ï¼ˆä¿æŒåŸæœ‰æ ¼å¼ï¼‰
                return urlObj.pathname + urlObj.search + urlObj.hash;
            }
            
            // é¡µé¢åŠ è½½æ—¶åº”ç”¨è¿½è¸ªå‚æ•°åˆ°æ‰€æœ‰ç«™å†…é“¾æ¥
            document.addEventListener('DOMContentLoaded', function() {
                const trackingParams = getTrackingParams();
                
                // å¦‚æœæœ‰è¿½è¸ªå‚æ•°ï¼Œåˆ™åº”ç”¨åˆ°æ‰€æœ‰ç«™å†…é“¾æ¥
                if (Object.keys(trackingParams).length > 0) {
                    // é€‰æ‹©æ‰€æœ‰ç«™å†…é“¾æ¥
                    const internalLinks = document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"]');
                    
                    internalLinks.forEach(link => {
                        const currentHref = link.getAttribute('href');
                        if (currentHref && !currentHref.includes('?')) {
                            // å¦‚æœé“¾æ¥è¿˜æ²¡æœ‰æŸ¥è¯¢å‚æ•°ï¼Œç›´æ¥æ·»åŠ 
                            link.setAttribute('href', currentHref + paramsToQueryString(trackingParams));
                        } else if (currentHref && currentHref.includes('?')) {
                            // å¦‚æœå·²æœ‰æŸ¥è¯¢å‚æ•°ï¼Œæ™ºèƒ½åˆå¹¶
                            link.setAttribute('href', addTrackingParamsToUrl(currentHref, trackingParams));
                        }
                    });
                    
                    console.log('è¿½è¸ªå‚æ•°å·²åº”ç”¨åˆ°æ‰€æœ‰ç«™å†…é“¾æ¥:', trackingParams);
                }
            });
        })();

        // è®°å½•é˜…è¯»å†å²
        document.addEventListener('DOMContentLoaded', function() {
            const novelData = {
                title: 'Claimed by the Alpha',
                url: '/novels/claimed-by-the-alpha/',
                cover_url: '/covers/claimed-by-the-alpha-ScreenShot_2025-11-24_141044_888.png',
                lastRead: new Date().toISOString(),
                currentChapter: 338
            };
            
            let history = JSON.parse(localStorage.getItem('readingHistory') || '[]');
            
            // ç§»é™¤å·²å­˜åœ¨çš„è®°å½•
            history = history.filter(item => item.title !== novelData.title);
            
            // æ·»åŠ åˆ°å¼€å¤´
            history.unshift(novelData);
            
            // åªä¿ç•™æœ€è¿‘5æ¡è®°å½•
            history = history.slice(0, 5);
            
            localStorage.setItem('readingHistory', JSON.stringify(history));
        });

        // ===== å¹¿å‘Šç‚¹å‡»å¼•å¯¼ç³»ç»Ÿ =====
        class AdClickGuideSystem {
            constructor() {
                // æ£€æµ‹PCæµè§ˆå™¨ç¯å¢ƒ
                this.isPCBrowser = this.detectPCBrowser();
                
                // å¦‚æœæ˜¯PCæµè§ˆå™¨ï¼Œç›´æ¥è¿”å›ï¼Œä¸åˆå§‹åŒ–ç³»ç»Ÿ
                if (this.isPCBrowser) {
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šæ£€æµ‹åˆ°PCæµè§ˆå™¨ï¼Œç³»ç»Ÿä¸ä¼šæ¿€æ´»');
                    return;
                }
                
                // å…³é”®ç‚¹1ï¼šå¼•å¯¼è§¦å‘æœºåˆ¶
                this.REQUIRED_ADS = 15; // éœ€è¦è·¨é¡µé¢ç´¯è®¡çš„å¹¿å‘Šæ•°é‡
                this.TRIGGER_PROBABILITY = 0.01; // 1%è§¦å‘æ¦‚ç‡
                this.COOLDOWN_MINUTES = 500; // 500åˆ†é’Ÿå†·å´æ—¶é—´

                // çŠ¶æ€ç®¡ç†
                this.currentPageAds = []; // å½“å‰é¡µé¢çš„å¹¿å‘Š
                this.isGuideActive = false;
                this.isDebugMode = false;
                this.observer = null;
                this.debugPanel = null;
                
                // è·¨é¡µé¢ç´¯è®¡æ•°æ®
                this.totalAdsSeen = this.getTotalAdsSeen();
                
                // å¼•å¯¼æœŸé—´çš„æ»šåŠ¨ç›‘æ§
                this.scrollMonitorInterval = null;
                this.targetScrollPosition = null;
                
                // å…³é”®ç‚¹5ï¼šè°ƒè¯•æ¨¡å¼ç›¸å…³
                this.themeClickCount = 0;
                this.themeClickTimer = null;
                
                this.init();
            }

            // æ£€æµ‹PCæµè§ˆå™¨ç¯å¢ƒ
            detectPCBrowser() {
                const userAgent = navigator.userAgent.toLowerCase();
                
                // æ£€æµ‹ç§»åŠ¨è®¾å¤‡æ ‡è¯†
                const mobileKeywords = [
                    'mobile', 'android', 'iphone', 'ipad', 'ipod',
                    'blackberry', 'iemobile', 'opera mini', 'webos'
                ];
                
                const isMobile = mobileKeywords.some(keyword => userAgent.includes(keyword));
                
                // æ£€æµ‹è§¦æ‘¸å±æ”¯æŒ
                const hasTouchScreen = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                
                // æ£€æµ‹å±å¹•å°ºå¯¸ï¼ˆå°äº1024pxå®½åº¦é€šå¸¸æ˜¯ç§»åŠ¨è®¾å¤‡ï¼‰
                const isSmallScreen = window.screen.width < 1024;
                
                // å¦‚æœæ˜¯ç§»åŠ¨è®¾å¤‡æˆ–æœ‰è§¦æ‘¸å±æˆ–å°å±å¹•ï¼Œåˆ™ä¸æ˜¯PCæµè§ˆå™¨
                const isPCBrowser = !isMobile && !hasTouchScreen && !isSmallScreen;
                
                console.log('å¹¿å‘Šå¼•å¯¼ï¼šæµè§ˆå™¨ç¯å¢ƒæ£€æµ‹', {
                    userAgent: userAgent,
                    isMobile: isMobile,
                    hasTouchScreen: hasTouchScreen,
                    screenWidth: window.screen.width,
                    isSmallScreen: isSmallScreen,
                    isPCBrowser: isPCBrowser
                });
                
                return isPCBrowser;
            }

            // è·å–è·¨é¡µé¢ç´¯è®¡å¹¿å‘Šæ•°é‡
            getTotalAdsSeen() {
                const stored = localStorage.getItem('adGuideTotalSeen');
                return stored ? parseInt(stored) : 0;
            }

            // ä¿å­˜è·¨é¡µé¢ç´¯è®¡å¹¿å‘Šæ•°é‡
            saveTotalAdsSeen() {
                localStorage.setItem('adGuideTotalSeen', this.totalAdsSeen.toString());
            }

            // å…³é”®ç‚¹1ï¼šå¼•å¯¼è§¦å‘æœºåˆ¶å®ç°
            init() {
                // å¦‚æœæ˜¯PCæµè§ˆå™¨ï¼Œä¸æ‰§è¡Œåˆå§‹åŒ–
                if (this.isPCBrowser) return;
                
                this.setupAdObserver();
                this.setupDebugMode();
                this.setupPageVisibilityHandler();
                this.startPeriodicCheck();
            }

            setupAdObserver() {
                this.observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            this.checkAdValidity(entry.target);
                        }
                    });
                }, {
                    threshold: 0.1,
                    rootMargin: '50px'
                });

                // ç›‘æ§æ‰€æœ‰AdSenseå¹¿å‘Šå®¹å™¨
                this.startAdMonitoring();
            }

            startAdMonitoring() {
                const checkForAds = () => {
                    const adElements = document.querySelectorAll('.adsbygoogle, ins[data-ad-client]');
                    adElements.forEach(ad => {
                        if (!ad.dataset.guideMonitored) {
                            ad.dataset.guideMonitored = 'true';
                            this.observer.observe(ad);
                        }
                    });
                };

                // ç«‹å³æ£€æŸ¥ä¸€æ¬¡
                checkForAds();
                
                // å®šæœŸæ£€æŸ¥æ–°å¹¿å‘Š
                setInterval(checkForAds, 200000);
            }

            checkAdValidity(adElement) {
                // å¦‚æœæ˜¯PCæµè§ˆå™¨ï¼Œä¸æ‰§è¡Œå¹¿å‘Šæ£€æµ‹
                if (this.isPCBrowser) return;
                
                // æ£€æŸ¥å¹¿å‘Šæ˜¯å¦æœ‰æ•ˆï¼šé«˜åº¦>100pxä¸”<=650pxä¸”å·²å¡«å……
                const rect = adElement.getBoundingClientRect();
                const isValidHeight = rect.height > 100 && rect.height <= 650;
                const isFilled = adElement.dataset.adStatus === 'filled' || 
                                adElement.querySelector('iframe') !== null ||
                                adElement.innerHTML.includes('googleads');

                if (isValidHeight && isFilled && !this.currentPageAds.includes(adElement)) {
                    this.currentPageAds.push(adElement);
                    
                    // ç´¯è®¡æ€»å¹¿å‘Šæ•°é‡ï¼ˆè·¨é¡µé¢ï¼‰
                    this.totalAdsSeen++;
                    this.saveTotalAdsSeen();
                    
                    console.log(`å¹¿å‘Šå¼•å¯¼ï¼šå‘ç°æ–°å¹¿å‘Šï¼Œå½“å‰é¡µé¢: ${this.currentPageAds.length}, ç´¯è®¡æ€»æ•°: ${this.totalAdsSeen}`);
                    this.updateDebugInfo();
                    
                    // æ£€æŸ¥æ˜¯å¦è¾¾åˆ°è§¦å‘æ¡ä»¶ï¼ˆåŸºäºç´¯è®¡æ•°é‡ï¼‰
                    if (this.totalAdsSeen >= this.REQUIRED_ADS) {
                        this.considerTriggeringGuide();
                    }
                }
            }

            considerTriggeringGuide() {
                // æ£€æŸ¥å†·å´æ—¶é—´
                if (!this.canTrigger()) {
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šä»åœ¨å†·å´æœŸå†…');
                    return;
                }

                // æ¦‚ç‡æ§åˆ¶ï¼š80%è§¦å‘ï¼Œ20%ä¸è§¦å‘
                const shouldTrigger = Math.random() < this.TRIGGER_PROBABILITY;
                if (!shouldTrigger) {
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šæ¦‚ç‡æ§åˆ¶è·³è¿‡');
                    this.recordTriggerAttempt();
                    return;
                }

                // è§¦å‘å¼•å¯¼
                this.triggerGuide();
            }

            canTrigger() {
                const lastTrigger = localStorage.getItem('adGuideLastTrigger');
                if (!lastTrigger) return true;
                
                const cooldownMs = this.COOLDOWN_MINUTES * 60 * 1000;
                const timeSinceLastTrigger = Date.now() - parseInt(lastTrigger);
                return timeSinceLastTrigger >= cooldownMs;
            }

            recordTriggerAttempt() {
                localStorage.setItem('adGuideLastTrigger', Date.now().toString());
            }

            // å…³é”®ç‚¹2ï¼šå¼•å¯¼äº¤äº’æµç¨‹å®ç°
            triggerGuide() {
                // å¦‚æœæ˜¯PCæµè§ˆå™¨ï¼Œä¸è§¦å‘å¼•å¯¼
                if (this.isPCBrowser) return;
                
                if (this.isGuideActive) return;
                
                this.isGuideActive = true;
                this.recordTriggerAttempt();
                
                // é€‰æ‹©å½“å‰é¡µé¢æœ€åä¸€ä¸ªæœ‰æ•ˆå¹¿å‘Šä½œä¸ºç›®æ ‡
                const targetAd = this.currentPageAds[this.currentPageAds.length - 1];
                if (!targetAd) {
                    console.error('å¹¿å‘Šå¼•å¯¼ï¼šå½“å‰é¡µé¢æ‰¾ä¸åˆ°ç›®æ ‡å¹¿å‘Š');
                    return;
                }

                // è§†å›¾å®šä½ï¼šæ»šåŠ¨åˆ°å¹¿å‘Šä¸­å¤®
                this.scrollToAdCenter(targetAd);
                
                // ç­‰å¾…æ»šåŠ¨å®Œæˆåæ˜¾ç¤ºå¼•å¯¼
                setTimeout(() => {
                    this.showGuideOverlay(targetAd);
                    this.restrictUserInteraction();
                    // å¼€å§‹æ»šåŠ¨ç›‘æ§ï¼Œé˜²æ­¢ç”¨æˆ·å› bugæ»šåŠ¨ç¦»å¼€ç›®æ ‡ä½ç½®
                    this.startScrollMonitoring();
                }, 500);
            }

            scrollToAdCenter(adElement) {
                const rect = adElement.getBoundingClientRect();
                const viewportHeight = window.innerHeight;
                this.targetScrollPosition = window.scrollY + rect.top - (viewportHeight / 2) + (rect.height / 2);
                
                window.scrollTo({
                    top: this.targetScrollPosition,
                    behavior: 'smooth'
                });
            }

            // å¼€å§‹ç›‘æ§æ»šåŠ¨ä½ç½®ï¼Œç¡®ä¿ç”¨æˆ·åœç•™åœ¨ç›®æ ‡ä½ç½®
            startScrollMonitoring() {
                if (this.scrollMonitorInterval) {
                    clearInterval(this.scrollMonitorInterval);
                }
                
                this.scrollMonitorInterval = setInterval(() => {
                    if (!this.isGuideActive) {
                        // å¼•å¯¼å·²ç»“æŸï¼Œç«‹å³åœæ­¢ç›‘æ§
                        this.stopScrollMonitoring();
                        return;
                    }
                    
                    if (this.targetScrollPosition !== null) {
                        const currentScroll = window.scrollY;
                        const tolerance = 50; // å…è®¸50pxçš„è¯¯å·®
                        
                        if (Math.abs(currentScroll - this.targetScrollPosition) > tolerance) {
                            console.log('å¹¿å‘Šå¼•å¯¼ï¼šæ£€æµ‹åˆ°ç”¨æˆ·æ»šåŠ¨åç§»ï¼Œé‡æ–°å®šä½åˆ°ç›®æ ‡ä½ç½®');
                            window.scrollTo({
                                top: this.targetScrollPosition,
                                behavior: 'smooth'
                            });
                        }
                    }
                }, 1000); // æ¯1ç§’æ£€æŸ¥ä¸€æ¬¡
            }

            // åœæ­¢æ»šåŠ¨ç›‘æ§
            stopScrollMonitoring() {
                if (this.scrollMonitorInterval) {
                    clearInterval(this.scrollMonitorInterval);
                    this.scrollMonitorInterval = null;
                    this.targetScrollPosition = null;
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šæ»šåŠ¨ç›‘æ§å·²åœæ­¢');
                }
            }

            showGuideOverlay(targetAd) {
                // åˆ›å»ºé«˜äº®æ•ˆæœå®¹å™¨
                const overlay = document.createElement('div');
                overlay.id = 'ad-guide-overlay';
                overlay.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 10000;
                    pointer-events: none;
                `;

                // è·å–å¹¿å‘Šç›¸å¯¹äºæ–‡æ¡£çš„ä½ç½®
                const rect = targetAd.getBoundingClientRect();
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
                
                // åˆ›å»ºé«˜äº®åŒºåŸŸ - ä½¿ç”¨ç»å¯¹å®šä½ç›¸å¯¹äºæ–‡æ¡£
                const highlight = document.createElement('div');
                highlight.style.cssText = `
                    position: absolute;
                    top: ${rect.top + scrollTop - 10}px;
                    left: ${rect.left + scrollLeft - 10}px;
                    width: ${rect.width + 20}px;
                    height: ${rect.height + 20}px;
                    border: 3px solid #FF0000;
                    border-radius: 8px;
                    box-shadow: 0 0 20px rgba(255, 0, 0, 0.6);
                    animation: pulse 2s infinite;
                    pointer-events: none;
                    z-index: 14000;
                `;

                // åˆ›å»ºæç¤ºä¿¡æ¯ - ä½¿ç”¨ç»å¯¹å®šä½ç›¸å¯¹äºæ–‡æ¡£
                const tooltip = document.createElement('div');
                tooltip.style.cssText = `
                    position: absolute;
                    top: ${rect.top + scrollTop - 80}px;
                    left: ${rect.left + scrollLeft}px;
                    width: ${Math.max(rect.width, 300)}px;
                    background: #007AFF;
                    color: white;
                    padding: 12px 16px;
                    border-radius: 8px;
                    font-size: 14px;
                    line-height: 1.4;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
                    pointer-events: none;
                    z-index: 20000;
                `;
                tooltip.textContent = 'Please click an AD and watch it for 10s(swipe through) to keep reading. Thank you!ğŸ‘‡ğŸ‘‡ğŸ‘‡ ğŸ‘‡ğŸ‘‡ğŸ‘‡ ğŸ‘‡ğŸ‘‡ğŸ‘‡';

                // æ·»åŠ CSSåŠ¨ç”»
                if (!document.getElementById('guide-animation-styles')) {
                    const style = document.createElement('style');
                    style.id = 'guide-animation-styles';
                    style.textContent = `
                        @keyframes pulse {
                            0% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.6); }
                            50% { box-shadow: 0 0 30px rgba(255, 0, 0, 0.9); }
                            100% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.6); }
                        }
                    `;
                    document.head.appendChild(style);
                }

                overlay.appendChild(highlight);
                overlay.appendChild(tooltip);
                document.body.appendChild(overlay);

                // ç¡®ä¿å¹¿å‘ŠåŒºåŸŸå¯ä»¥è¢«ç‚¹å‡»ï¼ˆè®¾ç½®åˆé€‚çš„z-indexï¼‰
                targetAd.style.position = 'relative';
                targetAd.style.zIndex = '15000'; // ä½äºæç¤ºå¼¹çª—ä½†é«˜äºå…¶ä»–å…ƒç´ 
                targetAd.style.pointerEvents = 'auto';

                // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œæ›´æ–°æç¤ºå¼¹çª—ä½ç½®
                this.updateOverlayPosition = () => {
                    if (!overlay || !overlay.parentNode) return;
                    
                    const newRect = targetAd.getBoundingClientRect();
                    const newScrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const newScrollLeft = window.pageXOffset || document.documentElement.scrollLeft;
                    
                    // æ›´æ–°é«˜äº®åŒºåŸŸä½ç½®
                    highlight.style.top = `${newRect.top + newScrollTop - 10}px`;
                    highlight.style.left = `${newRect.left + newScrollLeft - 10}px`;
                    
                    // æ›´æ–°æç¤ºä¿¡æ¯ä½ç½®
                    tooltip.style.top = `${newRect.top + newScrollTop - 80}px`;
                    tooltip.style.left = `${newRect.left + newScrollLeft}px`;
                };
                
                // ä½¿ç”¨è¢«åŠ¨ç›‘å¬å™¨ï¼Œé¿å…å¹²æ‰°æ»šåŠ¨ç›‘æ§é€»è¾‘
                window.addEventListener('scroll', this.updateOverlayPosition, { passive: true });
                window.addEventListener('resize', this.updateOverlayPosition, { passive: true });

                // å…è®¸ç‚¹å‡»ç›®æ ‡å¹¿å‘Š
                this.enableAdClick(targetAd);
            }

            enableAdClick(targetAd) {
                const clickHandler = () => {
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šç”¨æˆ·ç‚¹å‡»äº†å¹¿å‘Š');
                    this.endGuide();
                };

                targetAd.addEventListener('click', clickHandler, { once: true });

                // 200ç§’åè‡ªåŠ¨ç»“æŸå¼•å¯¼ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
                setTimeout(() => {
                    if (this.isGuideActive) {
                        console.log('å¹¿å‘Šå¼•å¯¼ï¼šè¶…æ—¶è‡ªåŠ¨ç»“æŸï¼ˆ200ç§’ï¼‰');
                        this.endGuide();
                    }
                }, 200000); // 200ç§’ = 200000æ¯«ç§’
            }

            // å…³é”®ç‚¹3ï¼šäº¤äº’çŠ¶æ€ç®¡ç†å®ç°
            restrictUserInteraction() {
                // ä¸ç¦ç”¨é¡µé¢æ»šåŠ¨ï¼Œè€Œæ˜¯é˜»æ­¢ç”¨æˆ·çš„æ»šåŠ¨æ‰‹åŠ¿
                // document.body.style.overflow = 'hidden'; // æ³¨é‡Šæ‰è¿™è¡Œ
                
                // åˆ›å»ºäº¤äº’æ‹¦æˆªå±‚
                const interactionBlocker = document.createElement('div');
                interactionBlocker.id = 'interaction-blocker';
                interactionBlocker.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    z-index: 9999;
                    background: transparent;
                `;
                
                // é˜»æ­¢ç”¨æˆ·æ»šåŠ¨ä½†å…è®¸ç¨‹åºåŒ–æ»šåŠ¨
                this.preventUserScroll = (e) => {
                    // é˜»æ­¢é¼ æ ‡æ»šè½®å’Œè§¦æ‘¸æ»šåŠ¨
                    if (e.type === 'wheel' || e.type === 'touchmove') {
                        e.preventDefault();
                        e.stopPropagation();
                    }
                };
                
                // æ·»åŠ æ»šåŠ¨é˜»æ­¢äº‹ä»¶ç›‘å¬å™¨
                document.addEventListener('wheel', this.preventUserScroll, { passive: false });
                document.addEventListener('touchmove', this.preventUserScroll, { passive: false });
                document.addEventListener('keydown', this.preventUserScroll, { passive: false });
                
                document.body.appendChild(interactionBlocker);
            }

            restoreUserInteraction() {
                // æ¢å¤é¡µé¢æ»šåŠ¨
                document.body.style.overflow = '';
                
                // ç§»é™¤æ»šåŠ¨é˜»æ­¢äº‹ä»¶ç›‘å¬å™¨
                if (this.preventUserScroll) {
                    document.removeEventListener('wheel', this.preventUserScroll);
                    document.removeEventListener('touchmove', this.preventUserScroll);
                    document.removeEventListener('keydown', this.preventUserScroll);
                    this.preventUserScroll = null;
                }
                
                // ç§»é™¤äº¤äº’æ‹¦æˆªå±‚
                const blocker = document.getElementById('interaction-blocker');
                if (blocker) {
                    blocker.remove();
                }
            }

            endGuide() {
                this.isGuideActive = false;
                
                // ç«‹å³åœæ­¢æ»šåŠ¨ç›‘æ§ï¼ˆå…³é”®ï¼šå¿…é¡»åœ¨æœ€å¼€å§‹å°±åœæ­¢ï¼‰
                this.stopScrollMonitoring();
                
                // ç§»é™¤æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨
                if (this.updateOverlayPosition) {
                    window.removeEventListener('scroll', this.updateOverlayPosition);
                    window.removeEventListener('resize', this.updateOverlayPosition);
                    this.updateOverlayPosition = null;
                }
                
                // ç§»é™¤å¼•å¯¼è¦†ç›–å±‚
                const overlay = document.getElementById('ad-guide-overlay');
                if (overlay) {
                    overlay.remove();
                }
                
                // æ¢å¤å¹¿å‘Šå…ƒç´ çš„åŸå§‹æ ·å¼
                this.currentPageAds.forEach(ad => {
                    ad.style.position = '';
                    ad.style.zIndex = '';
                    ad.style.pointerEvents = '';
                });
                
                // æ¢å¤ç”¨æˆ·äº¤äº’
                this.restoreUserInteraction();
                
                console.log('å¹¿å‘Šå¼•å¯¼ï¼šå¼•å¯¼ç»“æŸ');
            }

            // å…³é”®ç‚¹4ï¼šå¼•å¯¼é€€å‡ºæ¡ä»¶å®ç°
            setupPageVisibilityHandler() {
                let pageHiddenTime = null;
                
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden) {
                        pageHiddenTime = Date.now();
                    } else {
                        if (pageHiddenTime) {
                            const hiddenDuration = Date.now() - pageHiddenTime;
                            
                            if (hiddenDuration <= 10000) {
                                // ç¦»å¼€æ—¶é—´å°äº10ç§’ï¼Œæ˜¾ç¤ºæç¤ºå¼¹çª—
                                this.showShortLeaveNotification();
                            } else if (hiddenDuration > 10000) {
                                if (this.isGuideActive) {
                                    // å¼•å¯¼æ¿€æ´»ä¸­ä¸”ç¦»å¼€è¶…è¿‡10ç§’ï¼Œå…³é—­å¼•å¯¼å¹¶æ˜¾ç¤ºæ„Ÿè°¢å¼¹çª—
                                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šç”¨æˆ·ç¦»å¼€é¡µé¢è¶…è¿‡10ç§’ï¼Œè‡ªåŠ¨å…³é—­å¼•å¯¼');
                                    this.endGuide();
                                    this.showThankYouNotification();
                                } else {
                                    // å¼•å¯¼æœªæ¿€æ´»ä½†ä¹‹å‰å¯èƒ½æœ‰è¿‡å¼•å¯¼ï¼Œä»æ˜¾ç¤ºæ„Ÿè°¢å¼¹çª—
                                    this.showThankYouNotification();
                                }
                            }
                        }
                        pageHiddenTime = null;
                    }
                });
            }

            // æ˜¾ç¤ºçŸ­æš‚ç¦»å¼€æç¤ºå¼¹çª—
            showShortLeaveNotification() {
                // é¿å…é‡å¤å¼¹çª—
                if (document.getElementById('short-leave-notification')) {
                    return;
                }

                const notification = document.createElement('div');
                notification.id = 'short-leave-notification';
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 20px 30px;
                    border-radius: 12px;
                    font-size: 18px;
                    font-weight: 500;
                    z-index: 50000;
                    text-align: center;
                    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                    animation: fadeInScale 0.3s ease-out;
                `;
                notification.textContent = 'Less than 10 seconds';

                // æ·»åŠ åŠ¨ç”»æ ·å¼
                if (!document.getElementById('notification-animation-styles')) {
                    const style = document.createElement('style');
                    style.id = 'notification-animation-styles';
                    style.textContent = `
                        @keyframes fadeInScale {
                            0% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.8);
                            }
                            100% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1);
                            }
                        }
                        @keyframes fadeOutScale {
                            0% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1);
                            }
                            100% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.8);
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }

                document.body.appendChild(notification);

                // 2ç§’åè‡ªåŠ¨å…³é—­
                setTimeout(() => {
                    if (notification && notification.parentNode) {
                        notification.style.animation = 'fadeOutScale 0.3s ease-out';
                        setTimeout(() => {
                            if (notification && notification.parentNode) {
                                notification.remove();
                            }
                        }, 300);
                    }
                }, 2000);

                console.log('æ˜¾ç¤ºçŸ­æš‚ç¦»å¼€æç¤ºï¼šLess than 10 seconds');
            }

            // æ˜¾ç¤ºæ„Ÿè°¢å¹¿å‘Šæµè§ˆå¼¹çª—
            showThankYouNotification() {
                // é¿å…é‡å¤å¼¹çª—
                if (document.getElementById('thank-you-notification')) {
                    return;
                }

                const notification = document.createElement('div');
                notification.id = 'thank-you-notification';
                notification.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #007AFF, #5AC8FA);
                    color: white;
                    padding: 25px 35px;
                    border-radius: 16px;
                    font-size: 20px;
                    font-weight: 600;
                    z-index: 50000;
                    text-align: center;
                    box-shadow: 0 12px 40px rgba(0, 122, 255, 0.4);
                    animation: fadeInScale 0.4s ease-out;
                    border: 2px solid rgba(255, 255, 255, 0.2);
                `;
                notification.textContent = 'Thank you for your AD browsing';

                // ç¡®ä¿åŠ¨ç”»æ ·å¼å·²æ·»åŠ 
                if (!document.getElementById('notification-animation-styles')) {
                    const style = document.createElement('style');
                    style.id = 'notification-animation-styles';
                    style.textContent = `
                        @keyframes fadeInScale {
                            0% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.8);
                            }
                            100% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1);
                            }
                        }
                        @keyframes fadeOutScale {
                            0% {
                                opacity: 1;
                                transform: translate(-50%, -50%) scale(1);
                            }
                            100% {
                                opacity: 0;
                                transform: translate(-50%, -50%) scale(0.8);
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }

                document.body.appendChild(notification);

                // 3ç§’åè‡ªåŠ¨å…³é—­
                setTimeout(() => {
                    if (notification && notification.parentNode) {
                        notification.style.animation = 'fadeOutScale 0.4s ease-out';
                        setTimeout(() => {
                            if (notification && notification.parentNode) {
                                notification.remove();
                            }
                        }, 400);
                    }
                }, 3000);

                console.log('æ˜¾ç¤ºæ„Ÿè°¢å¹¿å‘Šæµè§ˆæç¤ºï¼šThank you for your AD browsing');
            }

            // å…³é”®ç‚¹5ï¼šè°ƒè¯•æ¨¡å¼å®ç°
            setupDebugMode() {
                const themeBtn = document.getElementById('theme-btn');
                if (!themeBtn) return;

                themeBtn.addEventListener('click', (e) => {
                    this.themeClickCount++;
                    
                    if (this.themeClickTimer) {
                        clearTimeout(this.themeClickTimer);
                    }
                    
                    this.themeClickTimer = setTimeout(() => {
                        this.themeClickCount = 0;
                    }, 2000);
                    
                    if (this.themeClickCount === 4) {
                        this.toggleDebugMode();
                        this.themeClickCount = 0;
                    }
                });
            }

            toggleDebugMode() {
                this.isDebugMode = !this.isDebugMode;
                
                if (this.isDebugMode) {
                    this.showDebugPanel();
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šè°ƒè¯•æ¨¡å¼å·²æ¿€æ´»');
                } else {
                    this.hideDebugPanel();
                    console.log('å¹¿å‘Šå¼•å¯¼ï¼šè°ƒè¯•æ¨¡å¼å·²å…³é—­');
                }
            }

            showDebugPanel() {
                if (this.debugPanel) return;
                
                this.debugPanel = document.createElement('div');
                this.debugPanel.id = 'ad-guide-debug';
                this.debugPanel.style.cssText = `
                    position: fixed;
                    top: 10px;
                    right: 10px;
                    width: 250px;
                    background: rgba(0, 0, 0, 0.9);
                    color: white;
                    padding: 15px;
                    border-radius: 8px;
                    font-size: 12px;
                    z-index: 20000;
                    font-family: monospace;
                `;
                
                document.body.appendChild(this.debugPanel);
                this.updateDebugInfo();
                
                // å®šæœŸæ›´æ–°è°ƒè¯•ä¿¡æ¯
                this.debugUpdateInterval = setInterval(() => {
                    this.updateDebugInfo();
                }, 1000);
            }

            hideDebugPanel() {
                if (this.debugPanel) {
                    this.debugPanel.remove();
                    this.debugPanel = null;
                }
                
                if (this.debugUpdateInterval) {
                    clearInterval(this.debugUpdateInterval);
                    this.debugUpdateInterval = null;
                }
            }

            updateDebugInfo() {
                if (!this.debugPanel) return;
                
                const lastTrigger = localStorage.getItem('adGuideLastTrigger');
                const cooldownMs = this.COOLDOWN_MINUTES * 60 * 1000;
                const now = Date.now();
                
                let timeUntilReset = 0;
                if (lastTrigger) {
                    const timeSinceLastTrigger = now - parseInt(lastTrigger);
                    timeUntilReset = Math.max(0, cooldownMs - timeSinceLastTrigger);
                }
                
                const minutes = Math.floor(timeUntilReset / 60000);
                const seconds = Math.floor((timeUntilReset % 60000) / 1000);
                
                this.debugPanel.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 10px;">å¹¿å‘Šå¼•å¯¼è°ƒè¯•é¢æ¿</div>
                    <div>æµè§ˆå™¨ç¯å¢ƒ: ${this.isPCBrowser ? 'PCæµè§ˆå™¨(å·²ç¦ç”¨)' : 'ç§»åŠ¨è®¾å¤‡'}</div>
                    <div>å½“å‰é¡µé¢å¹¿å‘Š: ${this.currentPageAds ? this.currentPageAds.length : 0}</div>
                    <div>ç´¯è®¡å¹¿å‘Šæ€»æ•°: ${this.totalAdsSeen || 0}</div>
                    <div>è·ç¦»è§¦å‘è¿˜éœ€: ${Math.max(0, this.REQUIRED_ADS - (this.totalAdsSeen || 0))} ä¸ªå¹¿å‘Š</div>
                    <div>é‡ç½®å€’è®¡æ—¶: ${minutes}:${seconds.toString().padStart(2, '0')}</div>
                    <div>å¼•å¯¼çŠ¶æ€: ${this.isGuideActive ? 'æ¿€æ´»ä¸­' : 'å¾…æœº'}</div>
                    <button onclick="adGuideSystem.resetAllData()" style="
                        margin-top: 10px;
                        padding: 5px 10px;
                        background: #007AFF;
                        color: white;
                        border: none;
                        border-radius: 4px;
                        cursor: pointer;
                        font-size: 11px;
                    ">ç«‹å³é‡ç½®</button>
                `;
            }

            resetAllData() {
                localStorage.removeItem('adGuideLastTrigger');
                localStorage.removeItem('adGuideTotalSeen');
                this.totalAdsSeen = 0;
                this.currentPageAds = [];
                if (this.isGuideActive) {
                    this.endGuide();
                }
                // ç¡®ä¿åœæ­¢æ»šåŠ¨ç›‘æ§
                this.stopScrollMonitoring();
                console.log('å¹¿å‘Šå¼•å¯¼ï¼šæ‰€æœ‰æ•°æ®å·²é‡ç½®ï¼ˆåŒ…æ‹¬è·¨é¡µé¢ç´¯è®¡æ•°æ®ï¼‰');
                this.updateDebugInfo();
            }

            startPeriodicCheck() {
                // æ¯200ç§’æ£€æŸ¥ä¸€æ¬¡å¹¿å‘ŠçŠ¶æ€
                setInterval(() => {
                    this.currentPageAds = this.currentPageAds.filter(ad => {
                        const rect = ad.getBoundingClientRect();
                        return rect.height > 100 && rect.height <= 650 && document.body.contains(ad);
                    });
                    this.updateDebugInfo();
                }, 200000);
            }
        }

        // åˆå§‹åŒ–å¹¿å‘Šå¼•å¯¼ç³»ç»Ÿ
        let adGuideSystem;
        document.addEventListener('DOMContentLoaded', function() {
            adGuideSystem = new AdClickGuideSystem();
            
            // å°†å®ä¾‹æš´éœ²åˆ°å…¨å±€ï¼Œä¾›è°ƒè¯•ä½¿ç”¨
            window.adGuideSystem = adGuideSystem;
        });
    </script>
</body>
</html>