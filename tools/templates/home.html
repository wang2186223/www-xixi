<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page_title %}{{ page_title }}{% else %}NovelVibe - Free Novel Online | Read Light Novels, Romance & More{% endif %}</title>
    <meta name="description" content="{% if page_description %}{{ page_description }}{% else %}Read free novels online! Discover thousands of light novels, romance novels, and graphic novels. Get daily novel updates. Start reading your favorite novels now - completely free, no registration required.{% endif %}">
    <meta name="keywords" content="free novel online, light novel, apothecary diaries light novel, heavens official blessing novel, dune novel, novel updates, romance novel, graphic novel, school spirits graphic novel, visual novel, novel master, novel synonym, how many words in a novel, read novel free, online novel, free novels, werewolf novels, paranormal romance">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{% if page_title %}{{ page_title }}{% else %}NovelVibe - Free Novels for Women{% endif %}">
    <meta property="og:description" content="{% if page_description %}{{ page_description }}{% else %}Discover thousands of free werewolf romance novels{% endif %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ canonical_url }}">
    <meta property="og:image" content="{{ site_url }}/assets/images/og-image.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% if page_title %}{{ page_title }}{% else %}NovelVibe{% endif %}">
    <meta name="twitter:description" content="{% if page_description %}{{ page_description }}{% else %}Free werewolf romance novels{% endif %}">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="{{ canonical_url }}">
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EWY8W7MKKM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EWY8W7MKKM');
    </script>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3785399647875281"
         crossorigin="anonymous"></script>
    
    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');

    fbq('init', '3902941096613787');
    
    // Natural 72-hour event tracking prevention (resets every 3 days)
    function shouldTrackEvent(eventName) {
        const now = new Date();
        const threeDaysAgo = new Date(now.getTime() - (3 * 24 * 60 * 60 * 1000));
        const currentPeriod = Math.floor(now.getTime() / (3 * 24 * 60 * 60 * 1000));
        const storageKey = `fb_event_${eventName}`;
        const lastTrackedPeriod = localStorage.getItem(storageKey);
        
        if (!lastTrackedPeriod || parseInt(lastTrackedPeriod) !== currentPeriod) {
            localStorage.setItem(storageKey, currentPeriod.toString());
            return true;
        }
        
        return false;
    }
    
    // Track PageView with 72-hour prevention
    if (shouldTrackEvent('PageView_Home')) {
        fbq('track', 'PageView');
        console.log('Facebook事件已发送: PageView (首页浏览)');
    } else {
        console.log('Facebook事件已跳过: PageView_Home (本72小时内已发送)');
    }
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=3902941096613787&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Facebook Pixel Code -->
    
    <!-- Page Visit Statistics Code -->
    <script>
    // Page visit data collection
    function sendPageVisit() {
        // First get user IP address
        getUserIP().then(userIP => {
            const data = {
                page: window.location.href,
                userAgent: navigator.userAgent,
                userIP: userIP
            };
            
            // Send data to Google Apps Script
            fetch('https://script.google.com/macros/s/AKfycbxvbINCdEawKjvPQxGFWACwJ1NL_PGraB2FntCuJbV7k3QGfNvm_rMG6JB0CjsV1A/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.log('Analytics error:', error);
            });
        }).catch(error => {
            // If IP retrieval fails, still send other data
            const data = {
                page: window.location.href,
                userAgent: navigator.userAgent,
                userIP: 'Unknown'
            };
            
            fetch('https://script.google.com/macros/s/AKfycbxvbINCdEawKjvPQxGFWACwJ1NL_PGraB2FntCuJbV7k3QGfNvm_rMG6JB0CjsV1A/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => {
                console.log('Analytics error:', error);
            });
        });
    }
    
    // Get user IP address
    async function getUserIP() {
        try {
            // Method 1: Use free IP API
            const response = await fetch('https://api.ipify.org?format=json');
            const ipData = await response.json();
            return ipData.ip;
        } catch (error1) {
            try {
                // Method 2: Backup IP API
                const response = await fetch('https://httpbin.org/ip');
                const ipData = await response.json();
                return ipData.origin.split(',')[0].trim();
            } catch (error2) {
                try {
                    // Method 3: Third backup API
                    const response = await fetch('https://jsonip.com');
                    const ipData = await response.json();
                    return ipData.ip;
                } catch (error3) {
                    console.log('IP retrieval failed, using Unknown');
                    return 'Unknown';
                }
            }
        }
    }
    
    // Send visit data after page load
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', sendPageVisit);
    } else {
        sendPageVisit();
    }
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #9c89b8;
            --background-color: #f8f9fa;
            --card-bg-color: #ffffff;
            --text-color: #333333;
            --light-text: #6c757d;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --hover-shadow: rgba(0, 0, 0, 0.15);
            --footer-bg: #343a40;
            --footer-text: #f8f9fa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f0f23 0%, #1a1b3a 100%);
            color: var(--text-color);
            line-height: 1.6;
            padding-top: 70px;
            min-height: 100vh;
        }

        /* Navigation Bar */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 15, 35, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
            padding: 12px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
        }

        .logo i {
            margin-right: 8px;
            color: var(--accent-color);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 10px 15px 10px 40px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            background: var(--card-bg-color);
            color: var(--text-color);
            font-size: 0.9rem;
            width: 250px;
            transition: all 0.3s;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(139, 76, 184, 0.2);
            width: 280px;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--light-text);
            font-size: 0.9rem;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s;
            padding: 8px 15px;
            border-radius: 20px;
        }

        .nav-links a:hover {
            color: var(--accent-color);
            background: rgba(244, 114, 182, 0.1);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 0;
            background: linear-gradient(135deg, rgba(139, 76, 184, 0.1), rgba(217, 70, 239, 0.1));
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--text-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            font-size: 1.3rem;
            color: var(--light-text);
            max-width: 600px;
            margin: 0 auto 30px;
        }

        .hero-cta {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            display: inline-block;
            transition: transform 0.3s;
        }

        .hero-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(139, 76, 184, 0.4);
        }

        /* Section Headers */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 50px 0 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--accent-color);
        }

        .view-more {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: color 0.3s;
            padding: 8px 20px;
            border: 1px solid var(--primary-color);
            border-radius: 20px;
        }

        .view-more:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        /* Novel Card */
        .novel-card {
            background: var(--card-bg-color);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px var(--shadow-color);
            transition: all 0.3s ease;
            animation: fadeIn 0.6s ease-out;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
        }

        .novel-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 35px var(--hover-shadow);
            border-color: var(--primary-color);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .cover-container {
            width: 100%;
            height: 320px;
            overflow: hidden;
            position: relative;
        }

        .novel-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.3s;
        }

        .novel-card:hover .novel-cover {
            transform: scale(1.05);
        }

        .rating-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.8);
            color: var(--accent-color);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .card-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .novel-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 2.8rem;
            color: var(--text-color);
        }

        .novel-author {
            color: var(--accent-color);
            font-size: 0.95rem;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .novel-desc {
            font-size: 0.9rem;
            color: var(--light-text);
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            flex-grow: 1;
            line-height: 1.5;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 15px;
        }

        .tag {
            background: linear-gradient(45deg, rgba(139, 76, 184, 0.2), rgba(217, 70, 239, 0.2));
            color: var(--accent-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid rgba(244, 114, 182, 0.3);
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .read-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .read-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 76, 184, 0.4);
        }

        .update-info {
            font-size: 0.8rem;
            color: var(--light-text);
            text-align: right;
        }

        /* Category Filters */
        .category-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 20px;
            background: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-color);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .filter-btn:hover,
        .filter-btn.active {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-color: var(--primary-color);
            color: white;
        }

        /* Stats Section */
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .stat-card {
            background: var(--card-bg-color);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--accent-color);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--light-text);
            font-size: 0.9rem;
        }

        /* Footer */
        footer {
            background: var(--card-bg-color);
            border-top: 1px solid var(--border-color);
            padding: 40px 0 20px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .footer-section h3 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section li {
            margin-bottom: 8px;
        }

        .footer-section a {
            color: var(--light-text);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: var(--accent-color);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--light-text);
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                padding: 10px 15px;
            }
            
            .search-box input {
                width: 200px;
            }
            
            .search-box input:focus {
                width: 220px;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .cover-container {
                height: 280px;
            }
            
            .nav-links {
                display: none;
            }
        }

        @media (max-width: 576px) {
            .hero {
                padding: 40px 0;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .category-filters {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 10px;
            }
        }
    </style>
    
    <!-- Ahrefs Analytics -->
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="E2ZZe80dfDLAEGhT2iI37A" async></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <a href="/" class="logo">
            <i class="fas fa-moon"></i>MoonPack Novels
        </a>
        <div class="nav-right">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" placeholder="Search werewolf novels...">
            </div>
            <div class="nav-links">
                <a href="/novels/">Browse All</a>
                <a href="/categories/">Categories</a>
                <a href="/new-releases/">New Releases</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h1>Howl with Passion</h1>
            <p>Discover thousands of free werewolf romance novels. From alpha mates to pack bonds, immerse yourself in the ultimate paranormal love stories.</p>
            <a href="#featured" class="hero-cta">Start Reading Now</a>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="stat-card">
                <div class="stat-number">{{ stats.total_novels }}</div>
                <div class="stat-label">Free Novels</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ stats.total_chapters }}</div>
                <div class="stat-label">Chapters</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ stats.monthly_readers }}</div>
                <div class="stat-label">Monthly Readers</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">4.8★</div>
                <div class="stat-label">Average Rating</div>
            </div>
        </section>

        <!-- Category Filters -->
        <section class="category-filters">
            <button class="filter-btn active" data-category="all">All Stories</button>
            <button class="filter-btn" data-category="alpha">Alpha Romance</button>
            <button class="filter-btn" data-category="mate-bond">Mate Bonds</button>
            <button class="filter-btn" data-category="pack">Pack Dynamics</button>
            <button class="filter-btn" data-category="rejected">Rejected Mate</button>
            <button class="filter-btn" data-category="completed">Completed</button>
        </section>

        <!-- Featured Novels Section -->
        <section class="featured" id="featured">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-star"></i>
                    Featured Stories
                </h2>
                <a href="/featured/" class="view-more">View All Featured</a>
            </div>
            <div class="cards-grid">
                {% for novel in featured_novels %}
                <div class="novel-card" data-category="{{ novel.category }}">
                    <div class="cover-container">
                        <img src="{{ novel.cover_url }}" alt="{{ novel.title }}" class="novel-cover">
                        <div class="rating-badge">{{ novel.rating }}★</div>
                    </div>
                    <div class="card-content">
                        <h3 class="novel-title">{{ novel.title }}</h3>
                        <div class="novel-author">by {{ novel.author }}</div>
                        <p class="novel-desc">{{ novel.description }}</p>
                        <div class="tags">
                            {% for tag in novel.tags %}
                            <span class="tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        <div class="card-footer">
                            <a href="{{ novel.url }}" class="read-btn">Read Now</a>
                            <div class="update-info">
                                <div>{{ novel.chapters }} chapters</div>
                                <div>{{ novel.last_updated }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- New Releases Section -->
        <section class="new-releases">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-plus-circle"></i>
                    New Releases
                </h2>
                <a href="/new-releases/" class="view-more">View All New</a>
            </div>
            <div class="cards-grid">
                {% for novel in new_novels %}
                <div class="novel-card" data-category="{{ novel.category }}">
                    <div class="cover-container">
                        <img src="{{ novel.cover_url }}" alt="{{ novel.title }}" class="novel-cover">
                        <div class="rating-badge">{{ novel.rating }}★</div>
                    </div>
                    <div class="card-content">
                        <h3 class="novel-title">{{ novel.title }}</h3>
                        <div class="novel-author">by {{ novel.author }}</div>
                        <p class="novel-desc">{{ novel.description }}</p>
                        <div class="tags">
                            {% for tag in novel.tags %}
                            <span class="tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        <div class="card-footer">
                            <a href="{{ novel.url }}" class="read-btn">Read Now</a>
                            <div class="update-info">
                                <div>{{ novel.chapters }} chapters</div>
                                <div>{{ novel.last_updated }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Popular This Week Section -->
        <section class="popular">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="fas fa-fire"></i>
                    Popular This Week
                </h2>
                <a href="/popular/" class="view-more">View All Popular</a>
            </div>
            <div class="cards-grid">
                {% for novel in popular_novels %}
                <div class="novel-card" data-category="{{ novel.category }}">
                    <div class="cover-container">
                        <img src="{{ novel.cover_url }}" alt="{{ novel.title }}" class="novel-cover">
                        <div class="rating-badge">{{ novel.rating }}★</div>
                    </div>
                    <div class="card-content">
                        <h3 class="novel-title">{{ novel.title }}</h3>
                        <div class="novel-author">by {{ novel.author }}</div>
                        <p class="novel-desc">{{ novel.description }}</p>
                        <div class="tags">
                            {% for tag in novel.tags %}
                            <span class="tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        <div class="card-footer">
                            <a href="{{ novel.url }}" class="read-btn">Read Now</a>
                            <div class="update-info">
                                <div>{{ novel.chapters }} chapters</div>
                                <div>{{ novel.last_updated }}</div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>MoonPack Novels</h3>
                <p>Your ultimate destination for free werewolf romance novels. Discover passionate alpha stories, mate bonds, and pack adventures.</p>
            </div>
            <div class="footer-section">
                <h3>Popular Categories</h3>
                <ul>
                    <li><a href="/category/alpha-romance/">Alpha Romance</a></li>
                    <li><a href="/category/mate-bond/">Mate Bonds</a></li>
                    <li><a href="/category/pack-dynamics/">Pack Dynamics</a></li>
                    <li><a href="/category/rejected-mate/">Rejected Mate</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/about/">About Us</a></li>
                    <li><a href="/privacy/">Privacy Policy</a></li>
                    <li><a href="/terms/">Terms of Service</a></li>
                    <li><a href="/contact/">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Stay Connected</h3>
                <ul>
                    <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                    <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                    <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                    <li><a href="#"><i class="fab fa-pinterest"></i> Pinterest</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 MoonPack Novels. All rights reserved. | Free werewolf romance novels for passionate readers.</p>
        </div>
    </footer>

    <script>
        // URL参数传递系统 - 保持Facebook追踪参数在页面导航中传递
        (function() {
            // 从当前URL提取追踪参数
            function getTrackingParams() {
                const urlParams = new URLSearchParams(window.location.search);
                const trackingParams = {};
                
                // Facebook 点击ID
                if (urlParams.has('fbclid')) {
                    trackingParams.fbclid = urlParams.get('fbclid');
                }
                
                // UTM 参数
                const utmParams = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content', 'utm_id'];
                utmParams.forEach(param => {
                    if (urlParams.has(param)) {
                        trackingParams[param] = urlParams.get(param);
                    }
                });
                
                // 其他常见追踪参数
                const otherParams = ['gclid', 'msclkid', 'ref', 'source'];
                otherParams.forEach(param => {
                    if (urlParams.has(param)) {
                        trackingParams[param] = urlParams.get(param);
                    }
                });
                
                return trackingParams;
            }
            
            // 将追踪参数转换为查询字符串
            function paramsToQueryString(params) {
                const entries = Object.entries(params);
                if (entries.length === 0) return '';
                return entries.map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
            }
            
            // 给URL添加追踪参数
            function addTrackingParamsToUrl(url, trackingParams) {
                if (Object.keys(trackingParams).length === 0) return url;
                
                const separator = url.includes('?') ? '&' : '?';
                const queryString = paramsToQueryString(trackingParams);
                return url + separator + queryString;
            }
            
            // 页面加载后处理所有链接
            document.addEventListener('DOMContentLoaded', function() {
                const trackingParams = getTrackingParams();
                
                if (Object.keys(trackingParams).length > 0) {
                    // 选择所有站内链接
                    const internalLinks = document.querySelectorAll('a[href^="/"], a[href^="./"], a[href^="../"]');
                    
                    internalLinks.forEach(link => {
                        const href = link.getAttribute('href');
                        if (href) {
                            link.setAttribute('href', addTrackingParamsToUrl(href, trackingParams));
                        }
                    });
                    
                    console.log('追踪参数已应用到所有站内链接:', trackingParams);
                }
            });
        })();
        
        // Category filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            const novelCards = document.querySelectorAll('.novel-card');

            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    // Update active button
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filter cards
                    novelCards.forEach(card => {
                        if (category === 'all' || card.getAttribute('data-category') === category) {
                            card.style.display = 'block';
                            card.style.animation = 'fadeIn 0.5s ease-out';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-box input');
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                novelCards.forEach(card => {
                    const title = card.querySelector('.novel-title').textContent.toLowerCase();
                    const author = card.querySelector('.novel-author').textContent.toLowerCase();
                    const desc = card.querySelector('.novel-desc').textContent.toLowerCase();
                    
                    if (title.includes(searchTerm) || author.includes(searchTerm) || desc.includes(searchTerm)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });

            // Smooth scroll for hero CTA
            document.querySelector('.hero-cta').addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector('#featured').scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
